{"version":3,"file":"static/js/4126.725d9b14.chunk.js","mappings":"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","sources":["pages/SpecialDay/utils/constants.js","pages/SpecialDay/components/Table.jsx","hooks/usePagination.js","pages/SpecialDay/pages/DefaultPage.jsx","services/gift.service.js","services/special-day.service.js"],"sourcesContent":["export const DefaultFilter = {\r\n  search: '',\r\n  created_date_from: null,\r\n  created_date_to: null,\r\n};\r\n\r\nexport const OBJECT_TYPE = {\r\n  PRINCIPAL: 1,\r\n  INDIVIDUAL: 2,\r\n  AFFILIATE_UNIT: 3,\r\n};\r\n\r\nexport const DATE_TYPE = {\r\n  BIRTH_DATE: 1,\r\n  FOUNDING_DATE: 2,\r\n  EFFECTIVE_DATE_FROM: 3,\r\n  EFFECTIVE_DATE_TO: 4,\r\n};\r\n\r\nexport const Permission = {\r\n  ADD: 'SPECIAL_DAY_ADD',\r\n  EDIT: 'SPECIAL_DAY_EDIT',\r\n  VIEW: 'SPECIAL_DAY_VIEW',\r\n  DELETE: 'SPECIAL_DAY_DEL',\r\n  EXPORT: 'SPECIAL_DAY_EXPORT',\r\n};\r\n","import React, { useCallback } from 'react';\r\nimport { useMemo } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport { showConfirmModal } from 'actions/global';\r\nimport { deleteGift } from 'services/gift.service';\r\nimport DataTable from 'components/shared/DataTable/index';\r\nimport { DATE_TYPE, OBJECT_TYPE, Permission } from '../utils/constants';\r\nimport { showToast } from 'utils/helpers';\r\n\r\nconst RepresentativeTable = ({\r\n  loading,\r\n  data,\r\n  totalPages,\r\n  itemsPerPage,\r\n  page,\r\n  totalItems,\r\n  onChangePage,\r\n  onRefresh,\r\n  exportExcel,\r\n}) => {\r\n  const dispatch = useDispatch();\r\n  const columns = useMemo(\r\n    () => [\r\n      {\r\n        header: 'STT',\r\n        classNameHeader: 'cb_text_center',\r\n        classNameBody: 'cb_text_center',\r\n        formatter: (_, index) => <span className='cb_text_wrap'>{index + 1}</span>,\r\n      },\r\n      {\r\n        header: 'Tên đối tượng',\r\n        classNameHeader: 'cb_text_center',\r\n        classNameBody: 'cb_text_center',\r\n        formatter: (_, index) => (\r\n          <span\r\n            style={{ textDecoration: 'underline', cursor: 'pointer', color: 'var(--greenColor)' }}\r\n            onClick={() => {\r\n              switch (_.object_type) {\r\n                case OBJECT_TYPE.PRINCIPAL:\r\n                  return window.open(`/representative/detail/${_.id}`, '_blank', 'noreferrer');\r\n                case OBJECT_TYPE.AFFILIATE_UNIT:\r\n                  return window.open(`/affiliate-unit/detail/${_.id}`, '_blank', 'noreferrer');\r\n                case OBJECT_TYPE.INDIVIDUAL:\r\n                  return window.open(`/individual/detail/${_.id}`, '_blank', 'noreferrer');\r\n                default:\r\n                  showToast.info('Đối tượng không xác định');\r\n              }\r\n            }}>\r\n            {_.name}\r\n          </span>\r\n        ),\r\n      },\r\n      {\r\n        header: 'Loại đối tượng',\r\n        classNameHeader: 'cb_text_center',\r\n        classNameBody: 'cb_text_center',\r\n        formatter: (_, index) => (\r\n          <span className='cb_text_wrap'>\r\n            {_.object_type === OBJECT_TYPE.PRINCIPAL\r\n              ? 'Hiệu trưởng'\r\n              : _.object_type === OBJECT_TYPE.INDIVIDUAL\r\n              ? 'Cá nhân'\r\n              : 'Đơn vị liên kết'}\r\n          </span>\r\n        ),\r\n      },\r\n      {\r\n        header: 'Loại ngày đặc biệt',\r\n        classNameHeader: 'cb_text_center',\r\n        classNameBody: 'cb_text_center',\r\n        formatter: (_, index) => (\r\n          <span className='cb_text_wrap'>\r\n            {_.date_type === DATE_TYPE.BIRTH_DATE\r\n              ? 'Ngày sinh nhật'\r\n              : _.date_type === DATE_TYPE.FOUNDING_DATE\r\n              ? 'Ngày thành lập'\r\n              : _.date_type === DATE_TYPE.EFFECTIVE_DATE_FROM\r\n              ? 'Ngày bắt đầu nhiệm kỳ'\r\n              : _.date_type === DATE_TYPE.EFFECTIVE_DATE_TO\r\n              ? 'Ngày kết thúc nhiệm kỳ'\r\n              : 'Không xác định'}\r\n          </span>\r\n        ),\r\n      },\r\n      {\r\n        header: 'Ngày đặc biệt',\r\n        accessor: 'date',\r\n        classNameHeader: 'cb_text_center',\r\n        classNameBody: 'cb_text_center',\r\n      },\r\n      {\r\n        header: 'Ngày còn lại',\r\n        accessor: 'day_count',\r\n        classNameHeader: 'cb_text_center',\r\n        classNameBody: 'cb_text_center',\r\n        formatter: (item) => `${item.day_count} ngày`,\r\n      },\r\n    ],\r\n    [],\r\n  );\r\n\r\n  const actions = useMemo(() => {\r\n    return [\r\n      {\r\n        globalAction: true,\r\n        icon: 'fi fi-rr-inbox-out',\r\n        type: 'success',\r\n        content: 'Xuất excel',\r\n        outline: true,\r\n        onClick: exportExcel,\r\n      },\r\n    ];\r\n  }, [exportExcel]);\r\n\r\n  return (\r\n    <DataTable\r\n      loading={loading}\r\n      columns={columns}\r\n      data={data}\r\n      actions={actions}\r\n      totalPages={totalPages}\r\n      itemsPerPage={itemsPerPage}\r\n      page={page}\r\n      totalItems={totalItems}\r\n      onChangePage={onChangePage}\r\n    />\r\n  );\r\n};\r\n\r\nexport default RepresentativeTable;\r\n","import { useState } from 'react';\r\n\r\nconst usePagination = ({ data, itemsPerPage = 5 }) => {\r\n  const _data = data?.length ? data.map((item, index) => ({ ...item, dataIndex: index })) : [];\r\n  const [page, setPage] = useState(1);\r\n\r\n  const totalItems = _data.length;\r\n  const totalPages = Math.ceil(totalItems / itemsPerPage);\r\n  const rows = _data.slice((page - 1) * itemsPerPage, page * itemsPerPage);\r\n\r\n  const onChangePage = (page) => {\r\n    setPage(page);\r\n  };\r\n\r\n  return {\r\n    items: rows,\r\n    rows,\r\n    itemsPerPage,\r\n    page,\r\n    onChangePage,\r\n    totalPages,\r\n    totalItems,\r\n  };\r\n};\r\n\r\nexport default usePagination;\r\n","import React from 'react';\r\nimport { useEffect } from 'react';\r\nimport { useCallback } from 'react';\r\nimport { useState } from 'react';\r\n\r\nimport Table from '../components/Table';\r\nimport { getList, exportExcel as exportGift } from 'services/special-day.service';\r\nimport { defaultPaging, defaultParams, showToast } from 'utils/helpers';\r\nimport moment from 'moment';\r\nimport usePagination from 'hooks/usePagination';\r\n\r\nconst ListPage = () => {\r\n  const [params, setParams] = useState(defaultParams);\r\n  const [dataList, setDataList] = useState(defaultPaging);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const { items, itemsPerPage, page, totalItems, totalPages, onChangePage } = usePagination({\r\n    data: dataList,\r\n    itemsPerPage: defaultParams.limit,\r\n  });\r\n\r\n  const getData = useCallback(() => {\r\n    setLoading(true);\r\n    getList(params)\r\n      .then(setDataList)\r\n      .finally(() => {\r\n        setLoading(false);\r\n      });\r\n  }, [params]);\r\n\r\n  useEffect(getData, [getData]);\r\n\r\n  const exportExcel = () => {\r\n    exportGift()\r\n      .then((response) => {\r\n        const url = window.URL.createObjectURL(new Blob([response?.data]));\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        const configDate = moment().format('DDMMYYYY');\r\n        link.setAttribute('download', `special_day_${configDate}.xlsx`);\r\n        document.body.appendChild(link);\r\n        link.click();\r\n      })\r\n      .catch((error) => {\r\n        showToast.error('Lỗi xuất tập tin.');\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className='cb_main_wrapp'>\r\n      <Table\r\n        onChangePage={onChangePage}\r\n        exportExcel={exportExcel}\r\n        data={items}\r\n        totalPages={totalPages}\r\n        itemsPerPage={itemsPerPage}\r\n        page={page}\r\n        totalItems={totalItems}\r\n        loading={loading}\r\n        onRefresh={getData}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ListPage;\r\n","import httpClient from 'utils/httpClient';\r\n\r\nconst path = '/gift';\r\n\r\nexport const getList = (params = {}) => {\r\n  return httpClient.get(path, { params });\r\n};\r\n\r\nexport const getById = (id) => {\r\n  return httpClient.get(`${path}/${id}`);\r\n};\r\nexport const create = (params) => {\r\n  return httpClient.post(path, params);\r\n};\r\n\r\nexport const update = (params) => {\r\n  return httpClient.patch(path, params);\r\n};\r\n\r\nexport const deleteGift = (id) => {\r\n  return httpClient.delete(`${path}/${id}`);\r\n};\r\n\r\nexport const exportExcel = (params) => {\r\n  const header = {\r\n    responseType: `blob`,\r\n  };\r\n  return httpClient.get(`${path}/export-excel`, { params, ...header });\r\n};\r\n\r\nexport const exportForm = (giftId, params = {}) => {\r\n  const header = {\r\n    responseType: `blob`,\r\n  };\r\n\r\n  return httpClient.get(path + `/export-form/${giftId}`, { params, ...header });\r\n};\r\n","import httpClient from 'utils/httpClient';\r\n\r\nconst path = '/special-day';\r\n\r\nexport const getList = (params = {}) => {\r\n  return httpClient.get(path, { params });\r\n};\r\n\r\nexport const exportExcel = (params) => {\r\n  const header = {\r\n    responseType: `blob`,\r\n  };\r\n  return httpClient.get(`${path}/export-excel`, { params, ...header });\r\n};\r\n\r\nexport const getNotifyCount = (params = {}) => {\r\n  return httpClient.get(path + '/notify-count', { params });\r\n};\r\n"],"names":["OBJECT_TYPE","DATE_TYPE","_ref","loading","data","totalPages","itemsPerPage","page","totalItems","onChangePage","exportExcel","onRefresh","columns","useDispatch","useMemo","header","classNameHeader","classNameBody","formatter","_","index","_jsx","className","children","style","textDecoration","cursor","color","onClick","object_type","window","open","concat","id","showToast","info","name","date_type","accessor","item","day_count","actions","globalAction","icon","type","content","outline","DataTable","_ref$itemsPerPage","_data","length","map","_objectSpread","dataIndex","_useState","useState","_useState2","_slicedToArray","setPage","Math","ceil","rows","slice","items","defaultParams","params","_useState3","defaultPaging","_useState4","dataList","setDataList","_useState5","_useState6","setLoading","_usePagination","usePagination","limit","getData","useCallback","getList","then","finally","useEffect","Table","exportGift","response","url","URL","createObjectURL","Blob","link","document","createElement","href","configDate","moment","format","setAttribute","body","appendChild","click","catch","error","path","arguments","undefined","httpClient","get","getById","create","post","update","patch","deleteGift","delete","responseType","exportForm","giftId","getNotifyCount"],"sourceRoot":""}