"use strict";(self.webpackChunkshopdunk=self.webpackChunkshopdunk||[]).push([[2438],{9257:function(e,t,n){var i,a=n(1413),r=n(5987),c=n(168),s=n(2791),l=n(1134),o=n(5169),u=n(2648),d=n(7892),f=n.n(d),h=n(2360),g=n(184),_=["field","validation","placeholder","disabled","style","format","bordered","allowClear"],b=(0,h.ZP)(u.Z)(i||(i=(0,c.Z)(["\n  .ant-picker-input input {\n    color: black !important;\n  }\n"])));t.Z=function(e){var t=e.field,n=e.validation,i=e.placeholder,c=e.disabled,u=void 0!==c&&c,d=e.style,h=e.format,p=e.bordered,m=e.allowClear,x=(0,r.Z)(e,_),v=(0,l.Gc)(),Z=v.getFieldState(t,v.formState).error;return s.useEffect((function(){v.register(t,n)}),[v,t,n]),(0,g.jsxs)(s.Fragment,{children:[(0,g.jsx)(b,(0,a.Z)({bordered:p,allowClear:m,disabled:u,placeholder:i,value:v.watch(t)?f()(v.watch(t),h):"",onChange:function(e,n){n?(v.clearErrors(t),v.setValue(t,n)):v.setValue(t,null)},format:h,style:d},x)),Z&&(0,g.jsx)(o.Z,{message:null===Z||void 0===Z?void 0:Z.message})]})}},2438:function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});var i,a=n(1413),r=n(4165),c=n(5861),s=n(2791),l=n(3165),o=n(1134),u=n(4880),d=n(1453),f=n(9439),h=n(655),g=n(6503),_=n(4127),b=n(5653),p=n(9683),m=n(9257),x=n(9487),v=n(2152),Z=n(184),j=function(e){var t=e.disabled,n=e.title,i=e.id,a=(0,o.Gc)(),r=(0,s.useState)([]),c=(0,f.Z)(r,2),l=c[0],u=c[1],d=(0,s.useState)([]),j=(0,f.Z)(d,2),y=j[0],w=j[1],N=(0,v.a)().user;return(0,s.useEffect)((function(){(0,b.FW)().then(u),(0,p.FW)().then(w)}),[]),(0,s.useEffect)((function(){if(a.watch("affiliate_unit_id")){var e=null===y||void 0===y?void 0:y.find((function(e){return e.value===a.watch("affiliate_unit_id")}));e&&(a.setValue("affiliate_unit_code",e.affiliate_unit_code),a.setValue("affiliate_unit_address",e.affiliate_unit_address))}}),[a.watch("affiliate_unit_id"),y]),(0,Z.jsx)(h.Z,{title:n,id:i,children:(0,Z.jsxs)("div",{className:"cb_row",children:[(0,Z.jsx)("div",{className:"cb_col_6",children:(0,Z.jsx)(g.Z,{label:"\u0110\u01a1n v\u1ecb nh\u1eadn",isRequired:!0,disabled:t||N.is_admin,children:(0,Z.jsx)(_.Z,{allowClear:!0,disabled:t,field:"affiliate_unit_id",placeholder:"Ch\u1ecdn \u0111\u01a1n v\u1ecb nh\u1eadn",list:y||[],validation:{required:"\u0110\u01a1n v\u1ecb nh\u1eadn l\xe0 b\u1eaft bu\u1ed9c"}})})}),(0,Z.jsx)("div",{className:"cb_col_6",children:(0,Z.jsx)(g.Z,{label:"M\xe3 \u0111\u01a1n v\u1ecb nh\u1eadn",isRequired:!0,disabled:t,children:(0,Z.jsx)(x.Z,{allowClear:!0,disabled:t,field:"affiliate_unit_code"})})}),(0,Z.jsx)("div",{className:"cb_col_6",children:(0,Z.jsx)(g.Z,{label:"\u0110\u1ecba ch\u1ec9 qu\xe0 t\u1eb7ng",isRequired:!0,disabled:t,children:(0,Z.jsx)(x.Z,{allowClear:!0,disabled:t,field:"affiliate_unit_address"})})}),(0,Z.jsx)("div",{className:"cb_col_6",children:(0,Z.jsx)(g.Z,{label:"Ng\u01b0\u1eddi t\u1eb7ng",isRequired:!0,disabled:t,children:(0,Z.jsx)(_.Z,{allowClear:!0,disabled:t,field:"giver_user_id",placeholder:"Ch\u1ecdn ng\u01b0\u1eddi t\u1eb7ng",list:l||[],validation:{required:"Ng\u01b0\u1eddi t\u1eb7ng l\xe0 b\u1eaft bu\u1ed9c"}})})}),(0,Z.jsx)("div",{className:"cb_col_6",children:(0,Z.jsx)(g.Z,{label:"Ng\xe0y \u0111\u1ec1 ngh\u1ecb",isRequired:!0,disabled:t,children:(0,Z.jsx)(m.Z,{format:"DD/MM/YYYY",field:"proposed_date",placeholder:"dd/mm/yyyy",style:{width:"100%"},bordered:!1,allowClear:!0,validation:{required:"Ng\xe0y \u0111\u1ec1 ngh\u1ecb l\xe0 b\u1eaft bu\u1ed9c"}})})}),(0,Z.jsx)("div",{className:"cb_col_6",children:(0,Z.jsx)(g.Z,{label:"Ng\u01b0\u1eddi \u0111\u1ec1 ngh\u1ecb",isRequired:!0,disabled:t,children:(0,Z.jsx)(_.Z,{allowClear:!0,disabled:t,field:"proposed_user_id",placeholder:"Ch\u1ecdn ng\u01b0\u1eddi \u0111\u1ec1 ngh\u1ecb",list:l||[],validation:{required:"Ng\u01b0\u1eddi \u0111\u1ec1 ngh\u1ecb l\xe0 b\u1eaft bu\u1ed9c"}})})}),(0,Z.jsx)("div",{className:"cb_col_6",children:(0,Z.jsx)(g.Z,{label:"Ng\xe0y t\u1eb7ng qu\xe0",isRequired:!0,disabled:t,children:(0,Z.jsx)(m.Z,{format:"DD/MM/YYYY",field:"gift_date",placeholder:"dd/mm/yyyy",style:{width:"100%"},bordered:!1,allowClear:!0})})})]})})},y=n(7544),w=n(7463),N=n(2703),C=function(e){var t=e.disabled,n=e.title,i=(0,o.Gc)(),a=i.control,r=(0,o.Dq)({control:a,name:"gifts"}),c=r.remove,l=r.fields,u=r.append;console.log(l);var d=[{header:"STT",formatter:function(e,t){return t+1},classNameBody:"cb_text_center",classNameHeader:"cb_text_center"},{header:"T\xean ph\u1ea7n qu\xe0",classNameHeader:"cb_text_center",accessor:"gift_name",formatter:function(e,t){return(0,Z.jsx)(x.Z,{className:"cb_inp",field:"gifts.".concat(t,".gift_name"),placeholder:"Nh\u1eadp t\xean ph\u1ea7n qu\xe0",validation:{required:"T\xean ph\u1ea7n qu\xe0 l\xe0 b\u1eaft bu\u1ed9c"}})}},{header:"S\u1ed1 l\u01b0\u1ee3ng",classNameHeader:"cb_text_center",accessor:"gift_quantity",formatter:function(e,t){return(0,Z.jsx)(w.Z,{bordered:!0,field:"gifts.".concat(t,".gift_quantity"),placeholder:"Nh\u1eadp s\u1ed1 l\u01b0\u1ee3ng",validation:{min:{value:1,message:"Gi\xe1 tr\u1ecb ph\u1ea3i l\u1edbn h\u01a1n 0"},required:"S\u1ed1 l\u01b0\u1ee3ng l\xe0 b\u1eaft bu\u1ed9c"}})}},{header:"Gi\xe1 tr\u1ecb",classNameHeader:"cb_text_center",classNameBody:"cb_text_center",accessor:"representative_position",formatter:function(e,t){return(0,Z.jsx)(w.Z,{bordered:!0,field:"gifts.".concat(t,".gift_price"),placeholder:"Nh\u1eadp gi\xe1 tr\u1ecb",addonAfter:"VND",validation:{min:{value:1,message:"Gi\xe1 tr\u1ecb ph\u1ea3i l\u1edbn h\u01a1n 0"},required:"Gi\xe1 tr\u1ecb l\xe0 b\u1eaft bu\u1ed9c"}})}},{header:"Th\xe0nh ti\u1ec1n",classNameHeader:"cb_text_center",classNameBody:"cb_text_right",formatter:function(e,t){return(0,N.T4)(e.gift_price*e.gift_quantity)+" \u0111"}}],f=(0,s.useMemo)((function(){return[{globalAction:!0,icon:"ti-plus",type:"success",content:"Th\xeam ph\u1ea7n qu\xe0",onClick:function(){t||u({})}},{icon:"fi ti-trash",color:"red",disabled:t,onClick:function(e,n){t||c(n)}}]}),[]);return(0,Z.jsx)(h.Z,{title:n,isRequired:!0,children:(0,Z.jsx)("div",{className:"cb_col_12",children:(0,Z.jsx)(y.Z,{noSelect:!0,noPaging:!0,actions:f,columns:d,data:i.watch("gifts")||[]})})})},q=n(168),k=n(732),V=n(9286),F=n(4238),T=n(7996),Y=n(2360).ZP.span(i||(i=(0,q.Z)(["\n  width: 30px;\n  height: 30px;\n  position: absolute;\n  top: 5px;\n  right: 5px;\n  border-radius: 50%;\n  background: rgba(0, 0, 0, 0.2);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  transition: all 0.2 ease;\n  &:hover {\n    background: rgba(0, 0, 0, 1);\n  }\n"]))),R=function(e){var t,n,i,a,l=e.disabled,u=e.title,d=e.id,f=(0,o.Gc)(),g=f.watch,_=(0,s.useCallback)((function(e){return f.watch(e)?(0,Z.jsxs)("div",{style:{width:"100%",height:"100%",position:"relative"},children:[(0,Z.jsx)(T.Z,{width:"100%",height:"100%",src:f.watch(e)}),(0,Z.jsx)(Y,{onClick:function(){l||setTimeout((function(){f.setValue(e,null)}),100)},style:{visibility:l?"hidden":"visible"},children:(0,Z.jsx)(k.Z,{style:{fontSize:"16px",color:"white"}})})]}):(0,Z.jsx)("div",{style:{width:"100%",height:"100%",border:"1px dashed #ccc",borderRadius:"4px",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,Z.jsx)(V.Z,{})})}),[g("gift_image_1"),g("gift_image_2"),g("gift_image_3"),g("gift_image_4")]);return(0,Z.jsx)(h.Z,{title:u,id:d,children:(0,Z.jsxs)("div",{className:"cb_row",children:[(0,Z.jsx)("div",{className:"cb_col_12",children:(0,Z.jsxs)("div",{style:{display:"flex",gap:"15px"},children:[(0,Z.jsx)("div",{className:"cb_load_image cb_mb_2 cb_text_center",children:(0,Z.jsxs)("label",{className:"cb_choose_image",children:[!f.watch("gift_image_1")&&(0,Z.jsx)("input",{accept:"image/*",type:"file",onChange:function(e){return(t=t||(0,c.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,F.y3)(t.target.files[0]);case 2:n=e.sent,f.setValue("gift_image_1",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)},disabled:l}),_("gift_image_1")]})}),(0,Z.jsx)("div",{className:"cb_load_image cb_mb_2 cb_text_center",children:(0,Z.jsxs)("label",{className:"cb_choose_image",children:[!f.watch("gift_image_2")&&(0,Z.jsx)("input",{accept:"image/*",type:"file",onChange:function(e){return(n=n||(0,c.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,F.y3)(t.target.files[0]);case 2:n=e.sent,f.setValue("gift_image_2",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)},disabled:l}),_("gift_image_2")]})}),(0,Z.jsx)("div",{className:"cb_load_image cb_mb_2 cb_text_center",children:(0,Z.jsxs)("label",{className:"cb_choose_image",children:[!f.watch("gift_image_3")&&(0,Z.jsx)("input",{accept:"image/*",type:"file",onChange:function(e){return(i=i||(0,c.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,F.y3)(t.target.files[0]);case 2:n=e.sent,f.setValue("gift_image_3",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)},disabled:l}),_("gift_image_3")]})}),(0,Z.jsx)("div",{className:"cb_load_image cb_mb_2 cb_text_center",children:(0,Z.jsxs)("label",{className:"cb_choose_image",children:[!f.watch("gift_image_4")&&(0,Z.jsx)("input",{accept:"image/*",type:"file",onChange:function(e){return(a=a||(0,c.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,F.y3)(t.target.files[0]);case 2:n=e.sent,f.setValue("gift_image_4",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)},disabled:l}),_("gift_image_4")]})})]})}),(0,Z.jsx)("div",{className:"cb_col_6"})]})})},D=n(2426),S=n.n(D),M=function(){var e,t=(0,o.cI)(),n=(0,u.TH)().pathname,i=(0,u.UO)().id,f=(0,s.useMemo)((function(){return n.includes("/detail")}),[n]),h=(0,s.useCallback)((function(){i?(0,d.FO)(i).then((function(e){t.reset(e)})):t.reset({is_active:1,is_system:0})}),[i,t]),g=[{title:"Th\xf4ng tin chung",id:"general-info",component:j,fieldActive:["gifts","giver_user_id","affiliate_unit_id"]},{id:"gift_list",title:"Danh qu\xe0 t\u1eb7ng",fieldActive:["gifts"],component:C},{title:"H\xecnh \u1ea3nh qu\xe0 t\u1eb7ng",id:"images",component:R,fieldActive:["gift_image_1"]}];(0,s.useEffect)(h,[h]);var _=[{icon:"ti-printer",submit:!1,content:"In gi\u1ea5y \u0111\u1ec1 ngh\u1ecb t\u1eb7ng qu\xe0",className:"cb_btn cb_btn_outline cb_btn_outline_success",onClick:function(){(0,d.uz)(i).then((function(e){var t=window.URL.createObjectURL(new Blob([null===e||void 0===e?void 0:e.data])),n=document.createElement("a");n.href=t;var i=S()().format("DDMMYYYY");n.setAttribute("download","gifts_".concat(i,".docx")),document.body.appendChild(n),n.click()})).catch((function(e){return(0,N.Y8)(e)}))}}];return(0,Z.jsx)(o.RV,(0,a.Z)((0,a.Z)({},t),{},{children:(0,Z.jsx)(l.Z,{actions:_,detailForm:g,onSubmit:function(n){return(e=e||(0,c.Z)((0,r.Z)().mark((function e(n){var a,c,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.gifts&&0!==(null===(a=n.gifts)||void 0===a?void 0:a.length)){e.next=2;break}return e.abrupt("return",F.CF.warning("Ph\u1ea7n qu\xe0 t\u1eb7ng l\xe0 b\u1eaft bu\u1ed9c !"));case 2:if(e.prev=2,!i){e.next=9;break}return e.next=6,(0,d.Vx)(n);case 6:c="Ch\u1ec9nh s\u1eeda",e.next=13;break;case 9:return e.next=11,(0,d.Ue)(n);case 11:c="Th\xeam m\u1edbi",t.reset({is_active:1,is_system:0});case 13:F.CF.success("".concat(c," th\xe0nh c\xf4ng !")),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),F.CF.error((null===(s=e.t0.message)||void 0===s?void 0:s.constructor)===Array?e.t0.message[0]:e.t0.message||"C\xf3 l\u1ed7i x\u1ea3y ra!");case 19:case"end":return e.stop()}}),e,null,[[2,16]])})))).apply(this,arguments)},disabled:f})}))}},9683:function(e,t,n){n.d(t,{Ee:function(){return u},FO:function(){return s},FW:function(){return d},Ue:function(){return l},Vx:function(){return o},gp:function(){return c},uz:function(){return f}});var i=n(1413),a=n(3326),r="/affiliate-unit",c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.Z.get(r,{params:e})},s=function(e){return a.Z.get("".concat(r,"/").concat(e))},l=function(e){return a.Z.post(r,e)},o=function(e){return a.Z.patch(r,e)},u=function(e){return a.Z.delete("".concat(r,"/").concat(e))},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.Z.get(r+"/options",{params:e})},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a.Z.get(r+"/export-form/".concat(e),(0,i.Z)({params:t},{responseType:"blob"}))}},1453:function(e,t,n){n.d(t,{Ee:function(){return u},FO:function(){return s},Ue:function(){return l},Vx:function(){return o},gp:function(){return c},rD:function(){return d},uz:function(){return f}});var i=n(1413),a=n(3326),r="/gift",c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.Z.get(r,{params:e})},s=function(e){return a.Z.get("".concat(r,"/").concat(e))},l=function(e){return a.Z.post(r,e)},o=function(e){return a.Z.patch(r,e)},u=function(e){return a.Z.delete("".concat(r,"/").concat(e))},d=function(e){return a.Z.get("".concat(r,"/export-excel"),(0,i.Z)({params:e},{responseType:"blob"}))},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a.Z.get(r+"/export-form/".concat(e),(0,i.Z)({params:t},{responseType:"blob"}))}},5653:function(e,t,n){n.d(t,{Cp:function(){return d},FO:function(){return c},FW:function(){return u},Ue:function(){return s},Vx:function(){return l},gp:function(){return r},xh:function(){return o}});var i=n(3326),a="/user",r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.Z.get(a,{params:e})},c=function(e){return i.Z.get("".concat(a,"/").concat(e))},s=function(e){return i.Z.post("auth/signup",e)},l=function(e){return i.Z.patch(a,e)},o=function(e){return i.Z.delete("".concat(a,"/").concat(e))},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.Z.get(a+"/options",{params:e})},d=function(e){return i.Z.patch(a+"/change-password",e)}}}]);
//# sourceMappingURL=2438.9e02bcc0.chunk.js.map