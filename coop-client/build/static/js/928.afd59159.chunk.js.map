{"version":3,"file":"static/js/928.afd59159.chunk.js","mappings":"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","sources":["pages/LoginPage/index.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport logoLogin from 'assets/images/logo.png';\r\nimport { useAuth } from 'context/AuthProvider';\r\nimport { Button, Form, Alert } from 'antd';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { getErrorMessage } from 'utils';\r\nimport { getProfile, login } from 'services/auth.service';\r\nimport { setCookie } from 'utils/cookie';\r\nimport { COOKIE_JWT } from 'utils/constants';\r\nimport { LoadingOutlined } from '@ant-design/icons';\r\nimport placeholder from 'assets/images/placeholder.png';\r\nimport background from 'assets/images/background.jpg';\r\nimport styled from 'styled-components';\r\n\r\nconst initialValues = {\r\n  username: '',\r\n  password: '',\r\n};\r\n\r\nconst Wrapper = styled.div`\r\n  width: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  input::placeholder {\r\n    color: #333 !important;\r\n    opacity: 0.6;\r\n  }\r\n`;\r\n\r\nfunction LoginPage() {\r\n  const { user = null, setUser, initializing, setInitializing } = useAuth();\r\n  const [msgErr, setMsgErr] = useState(null);\r\n\r\n  const handleSubmitLogin = async (values) => {\r\n    setInitializing(true);\r\n    try {\r\n      const token = await login(values);\r\n      setCookie(COOKIE_JWT, JSON.stringify(token));\r\n      let profileData = await getProfile();\r\n      if (!profileData.is_admin) {\r\n        // let functions = await getFunctions();\r\n        // profileData.functions = functions;\r\n        profileData.functions = [];\r\n      }\r\n      setUser(profileData);\r\n    } catch (error) {\r\n      setMsgErr(getErrorMessage(error));\r\n    } finally {\r\n      setInitializing(false);\r\n    }\r\n  };\r\n\r\n  if (user) {\r\n    return <Redirect to='/' push />;\r\n  }\r\n\r\n  return (\r\n    <div className='cb_main_login' style={{ backgroundImage: `url(${background})` }}>\r\n      <div\r\n        style={{\r\n          width: '50vw',\r\n          height: '70vh',\r\n          display: 'flex',\r\n          borderRadius: '20px',\r\n          overflow: 'hidden',\r\n          background: 'white',\r\n        }}>\r\n        <Wrapper>\r\n          <Form\r\n            initialValues={initialValues}\r\n            scrollToFirstError={true}\r\n            name='frmLogin'\r\n            layout='vertical'\r\n            size='large'\r\n            onFinish={handleSubmitLogin}\r\n            className='cb_form_login'>\r\n            <img src={logoLogin} alt={2} />\r\n            <h1 style={{ maxWidth: '100%' }}>Đăng nhập</h1>\r\n            {msgErr && (\r\n              <Alert\r\n                message={msgErr}\r\n                className='cb_mb_2'\r\n                type='error'\r\n                showIcon\r\n                closable\r\n                onClose={() => setMsgErr(null)}\r\n              />\r\n            )}\r\n            <Form.Item\r\n              name='username'\r\n              disabled={initializing}\r\n              rules={[\r\n                {\r\n                  required: true,\r\n                  message: 'Tên tài khoản là bắt buộc',\r\n                },\r\n              ]}>\r\n              <input\r\n                type='text'\r\n                placeholder='Tên tài khoản'\r\n                autoComplete='username'\r\n                className='cb_inp'\r\n                style={{ margin: 0 }}\r\n              />\r\n            </Form.Item>\r\n            <Form.Item\r\n              name='password'\r\n              rules={[\r\n                {\r\n                  required: true,\r\n                  message: 'Mật khẩu là bắt buộc',\r\n                },\r\n              ]}>\r\n              <input\r\n                disabled={initializing}\r\n                type='password'\r\n                placeholder='Mật khẩu'\r\n                autoComplete='current-password'\r\n                className='cb_inp'\r\n                style={{\r\n                  margin: 0,\r\n                }}\r\n              />\r\n            </Form.Item>\r\n            <Form.Item>\r\n              <Button\r\n                disabled={initializing}\r\n                icon={initializing ? <LoadingOutlined /> : undefined}\r\n                type='primary'\r\n                htmlType='submit'\r\n                className='cb_btn cb_btn_login'>\r\n                Đăng nhập\r\n              </Button>\r\n            </Form.Item>\r\n          </Form>\r\n        </Wrapper>\r\n        <div style={{ width: '50%' }}>\r\n          <img style={{ height: '100%', objectFit: 'cover', width: '100%' }} src={placeholder} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LoginPage;\r\n"],"names":["initialValues","username","password","Wrapper","styled","div","_templateObject","_taggedTemplateLiteral","_ref","_useAuth","useAuth","_useAuth$user","user","setUser","initializing","setInitializing","_useState","useState","_useState2","_slicedToArray","msgErr","setMsgErr","_jsx","Redirect","to","push","className","style","backgroundImage","concat","background","children","_jsxs","width","height","display","borderRadius","overflow","Form","scrollToFirstError","name","layout","size","onFinish","_x","_asyncToGenerator","_regeneratorRuntime","mark","_callee","values","token","profileData","wrap","_context","prev","next","login","sent","setCookie","COOKIE_JWT","JSON","stringify","getProfile","is_admin","functions","t0","getErrorMessage","finish","stop","apply","arguments","src","logoLogin","alt","maxWidth","Alert","message","type","showIcon","closable","onClose","Item","disabled","rules","required","placeholder","autoComplete","margin","Button","icon","LoadingOutlined","undefined","htmlType","objectFit"],"sourceRoot":""}